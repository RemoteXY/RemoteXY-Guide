# Инициализация графического интерфейса

Инициализация графического интерфейса осуществляется в функции `Setup()`, точно так же как это происходит в обычном скетче Arduino IDE. 

```
void setup() 
{
  RemoteXY_Init (); 

  // TODO you setup code
}
```

Обязательным является вызов функции `RemoteXY_Init ();`. Функция инициализирует необходимые структуры данных для работы библиотеки `RemoteXY.h`. 

Далее могут быть инициализированы элементы графического интерфейса. 

Узнайте где хранятся [данные элементов графического интерфейса](/code/structure/ru.md).

#### Инициализация элементов графического интерфейса

Вы можете задать начальное состояние любых элементов графического интерфейса при старте контроллера. Например вы можете определить состояние переключателя как включен, или установить исходное значение в поле редактирования числа.

Это можно сделать записав начальное значение в связанную с элементом переменную. Этот код необходимо разместить в функции `setup ()` после инициализации самой библиотеки `RemoteXY.h`.

```
void setup () {
  RemoteXY_Init ();  
  
  RemoteXY.switch = 1; // переключатель включен 
}
```

#### Восстановление элементов графического интерфейса после сброса

Что бы начальное состояние элемента управления сохранялось при сбросе контроллера, вы можете сохранить значение связанной переменной в EEPROM в тот момент когда она изменяется. При старте контроллера необходимо восстановить значение переменной из EEPROM и поместить в связанную переменную.

```
uint8_t readSwitchStateFromEEPROM () {
  // TODO read eeprom
}
void writeSwitchStateToEEPROM (uint8_t state) {
  // TODO write eeprom
}

void setup () {
  RemoteXY_Init ();  
  RemoteXY.switch = readSwitchStateFromEEPROM ();
}

uint8_t prevSwitchState = 0;

void loop () {
  RemoteXY_Handler ();
  
  if (RemoteXY.switch != prevSwitchState) {
    writeSwitchStateToEEPROM (RemoteXY.switch);   
  }
  prevSwitchState = RemoteXY.switch;
}
```

### 